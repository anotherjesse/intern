#!/usr/bin/env python

import sys
import time

import dmenu
import intern.cloud

vms = intern.cloud.find()
if len(vms) == 0:
    sys.exit(1)

names = [vm.name for vm in vms]
name = dmenu.dmenu(names, prompt="Kill:")

if not name:
    sys.exit(1)

print 'killing VMs named %s' % name

for vm in vms:
    if vm.name == name:
        print vm.delete()

time.sleep(0.5)
